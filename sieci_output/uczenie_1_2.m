%uczenie predyktora oe
clear all;
n=0; farx(n+1)=9.362713e+002; foe(n+1)=9.293735e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=9.185285e+002; foe(n+1)=9.126708e+002; krok(n+1)=6.056323e-004; ng(n+1)=2.769156e+002;
n=2; farx(n+1)=1.798563e+002; foe(n+1)=1.773884e+002; krok(n+1)=2.680031e-002; ng(n+1)=1.495926e+002;
n=3; farx(n+1)=1.752329e+002; foe(n+1)=1.703107e+002; krok(n+1)=2.293321e-003; ng(n+1)=1.191766e+002;
n=4; farx(n+1)=1.639658e+002; foe(n+1)=1.566247e+002; krok(n+1)=2.701093e-003; ng(n+1)=1.689445e+002;
n=5; farx(n+1)=1.483590e+002; foe(n+1)=1.515558e+002; krok(n+1)=1.185480e-001; ng(n+1)=1.284919e+002;
n=6; farx(n+1)=1.536819e+002; foe(n+1)=1.427288e+002; krok(n+1)=2.577747e-001; ng(n+1)=1.212889e+002;
n=7; farx(n+1)=1.465194e+002; foe(n+1)=1.398937e+002; krok(n+1)=3.963116e-001; ng(n+1)=9.757964e+001;
n=8; farx(n+1)=1.420243e+002; foe(n+1)=1.387367e+002; krok(n+1)=1.269153e-001; ng(n+1)=6.383729e+001;
n=9; farx(n+1)=1.348087e+002; foe(n+1)=1.376578e+002; krok(n+1)=1.905690e+000; ng(n+1)=1.883845e+001;
n=10; farx(n+1)=1.315860e+002; foe(n+1)=1.369848e+002; krok(n+1)=5.018075e-001; ng(n+1)=5.890933e+001;
n=11; farx(n+1)=3.201467e+001; foe(n+1)=9.135398e+001; krok(n+1)=9.453922e-001; ng(n+1)=7.321652e+001;
n=12; farx(n+1)=3.198295e+001; foe(n+1)=9.117445e+001; krok(n+1)=1.495979e-002; ng(n+1)=3.035320e+002;
n=13; farx(n+1)=3.237004e+001; foe(n+1)=8.639010e+001; krok(n+1)=9.704432e-002; ng(n+1)=3.239619e+002;
n=14; farx(n+1)=3.230007e+001; foe(n+1)=8.574229e+001; krok(n+1)=1.027811e-002; ng(n+1)=3.206274e+002;
n=15; farx(n+1)=2.399171e+001; foe(n+1)=7.168157e+001; krok(n+1)=7.439834e-002; ng(n+1)=4.794248e+002;
n=16; farx(n+1)=1.893042e+001; foe(n+1)=6.347579e+001; krok(n+1)=9.073805e-001; ng(n+1)=7.051355e+002;
n=17; farx(n+1)=1.275052e+001; foe(n+1)=5.669392e+001; krok(n+1)=6.367965e-001; ng(n+1)=3.396435e+002;
n=18; farx(n+1)=7.898473e+000; foe(n+1)=3.812137e+001; krok(n+1)=8.575247e-001; ng(n+1)=3.438071e+002;
n=19; farx(n+1)=4.798220e+000; foe(n+1)=2.887363e+001; krok(n+1)=5.524354e-001; ng(n+1)=3.789807e+002;
n=20; farx(n+1)=3.705217e+000; foe(n+1)=2.749116e+001; krok(n+1)=1.006999e-001; ng(n+1)=4.693420e+002;
n=21; farx(n+1)=2.773740e+000; foe(n+1)=2.484108e+001; krok(n+1)=7.021280e-001; ng(n+1)=3.299208e+002;
n=22; farx(n+1)=4.006756e+000; foe(n+1)=2.146025e+001; krok(n+1)=1.160845e+000; ng(n+1)=2.324363e+002;
n=23; farx(n+1)=3.747153e+000; foe(n+1)=2.103149e+001; krok(n+1)=1.738735e-001; ng(n+1)=2.189671e+002;
n=24; farx(n+1)=2.337566e+000; foe(n+1)=1.909509e+001; krok(n+1)=6.524460e-001; ng(n+1)=5.646145e+002;
n=25; farx(n+1)=1.868250e+000; foe(n+1)=1.855997e+001; krok(n+1)=1.036878e-001; ng(n+1)=5.846350e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.575473e+000; foe(n+1)=1.776138e+001; krok(n+1)=2.458493e-005; ng(n+1)=4.218585e+002;
n=27; farx(n+1)=1.549865e+000; foe(n+1)=1.764462e+001; krok(n+1)=7.640629e-006; ng(n+1)=2.768364e+002;
n=28; farx(n+1)=1.514775e+000; foe(n+1)=1.742633e+001; krok(n+1)=1.662532e-004; ng(n+1)=8.223455e+001;
n=29; farx(n+1)=1.577119e+000; foe(n+1)=1.453872e+001; krok(n+1)=3.625910e-003; ng(n+1)=5.837035e+001;
n=30; farx(n+1)=1.555504e+000; foe(n+1)=1.407486e+001; krok(n+1)=1.750227e-003; ng(n+1)=4.472040e+002;
n=31; farx(n+1)=1.430921e+000; foe(n+1)=1.331291e+001; krok(n+1)=4.017797e-002; ng(n+1)=4.917068e+002;
n=32; farx(n+1)=1.124120e+000; foe(n+1)=1.284486e+001; krok(n+1)=6.524238e-002; ng(n+1)=3.518323e+002;
n=33; farx(n+1)=1.043525e+000; foe(n+1)=1.218521e+001; krok(n+1)=6.564205e-001; ng(n+1)=4.332648e+002;
n=34; farx(n+1)=9.281436e-001; foe(n+1)=1.110665e+001; krok(n+1)=1.139041e-001; ng(n+1)=2.810559e+002;
n=35; farx(n+1)=9.414168e-001; foe(n+1)=1.060688e+001; krok(n+1)=3.768236e-001; ng(n+1)=3.247044e+002;
n=36; farx(n+1)=8.736963e-001; foe(n+1)=1.022491e+001; krok(n+1)=5.738785e-001; ng(n+1)=1.966215e+002;
n=37; farx(n+1)=8.538812e-001; foe(n+1)=1.010414e+001; krok(n+1)=4.385923e-001; ng(n+1)=1.595366e+002;
n=38; farx(n+1)=8.595293e-001; foe(n+1)=9.776944e+000; krok(n+1)=2.075725e+000; ng(n+1)=1.964217e+002;
n=39; farx(n+1)=8.354331e-001; foe(n+1)=9.646027e+000; krok(n+1)=5.327583e-001; ng(n+1)=2.288836e+002;
n=40; farx(n+1)=8.323456e-001; foe(n+1)=9.566087e+000; krok(n+1)=4.980566e-001; ng(n+1)=2.528045e+002;
n=41; farx(n+1)=8.193813e-001; foe(n+1)=9.526785e+000; krok(n+1)=3.963116e-001; ng(n+1)=1.088811e+002;
n=42; farx(n+1)=8.058416e-001; foe(n+1)=9.469788e+000; krok(n+1)=7.289469e-001; ng(n+1)=9.168806e+001;
n=43; farx(n+1)=8.084963e-001; foe(n+1)=9.445307e+000; krok(n+1)=1.377726e+000; ng(n+1)=8.025066e+001;
n=44; farx(n+1)=8.049324e-001; foe(n+1)=9.435325e+000; krok(n+1)=1.096368e+000; ng(n+1)=9.616488e+001;
n=45; farx(n+1)=7.991970e-001; foe(n+1)=9.429602e+000; krok(n+1)=8.536620e-001; ng(n+1)=2.838750e+001;
n=46; farx(n+1)=7.964470e-001; foe(n+1)=9.428111e+000; krok(n+1)=1.256573e+000; ng(n+1)=1.121528e+001;
n=47; farx(n+1)=7.949109e-001; foe(n+1)=9.426960e+000; krok(n+1)=1.636204e+000; ng(n+1)=3.344010e+001;
n=48; farx(n+1)=7.860030e-001; foe(n+1)=9.424747e+000; krok(n+1)=5.002202e+000; ng(n+1)=1.301875e+001;
n=49; farx(n+1)=7.835770e-001; foe(n+1)=9.423443e+000; krok(n+1)=1.626372e+000; ng(n+1)=3.009051e+000;
n=50; farx(n+1)=7.834812e-001; foe(n+1)=9.423134e+000; krok(n+1)=1.179292e+000; ng(n+1)=1.304274e+001;
%odnowa zmiennej metryki
n=51; farx(n+1)=7.835659e-001; foe(n+1)=9.423089e+000; krok(n+1)=3.837877e-006; ng(n+1)=5.973501e+000;
n=52; farx(n+1)=7.835483e-001; foe(n+1)=9.423069e+000; krok(n+1)=6.997257e-006; ng(n+1)=3.805501e+000;
n=53; farx(n+1)=7.831875e-001; foe(n+1)=9.423040e+000; krok(n+1)=8.254679e-005; ng(n+1)=1.362258e+000;
n=54; farx(n+1)=7.847711e-001; foe(n+1)=9.422476e+000; krok(n+1)=2.186130e-003; ng(n+1)=1.177498e+000;
n=55; farx(n+1)=7.767671e-001; foe(n+1)=9.421245e+000; krok(n+1)=2.967304e-002; ng(n+1)=4.681443e-001;
n=56; farx(n+1)=7.653851e-001; foe(n+1)=9.418854e+000; krok(n+1)=5.197516e-002; ng(n+1)=6.904425e-001;
n=57; farx(n+1)=7.487286e-001; foe(n+1)=9.415880e+000; krok(n+1)=1.560458e-001; ng(n+1)=4.668985e-001;
n=58; farx(n+1)=7.440330e-001; foe(n+1)=9.415472e+000; krok(n+1)=1.352332e+000; ng(n+1)=1.264814e+001;
n=59; farx(n+1)=7.412097e-001; foe(n+1)=9.415427e+000; krok(n+1)=9.985387e-001; ng(n+1)=2.201715e+000;
n=60; farx(n+1)=7.409371e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.062525e+000; ng(n+1)=8.902135e-001;
n=61; farx(n+1)=7.409187e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.009068e+000; ng(n+1)=5.760854e-002;
n=62; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.098895e+000; ng(n+1)=2.120456e-002;
n=63; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.990683e-010; ng(n+1)=2.362164e-003;
n=64; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=7.593133e-011; ng(n+1)=2.362164e-003;
n=65; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.579741e-009; ng(n+1)=2.362164e-003;
n=66; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=5.665331e-010; ng(n+1)=2.362164e-003;
 % z造 kierunek w metodzie zm - odnowa 
n=67; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=2.664567e-006; ng(n+1)=2.362164e-003;
n=68; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=7.440701e-006; ng(n+1)=6.405160e-004;
n=69; farx(n+1)=7.409270e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.075011e-006; ng(n+1)=6.951738e-005;
n=70; farx(n+1)=7.409272e-001; foe(n+1)=9.415426e+000; krok(n+1)=8.605927e-004; ng(n+1)=6.945623e-005;
n=71; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=4.498755e-003; ng(n+1)=3.023819e-004;
n=72; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=7.770414e-012; ng(n+1)=2.702976e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=73; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=4.937118e-005; ng(n+1)=2.702976e-004;
n=74; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.778534e-006; ng(n+1)=5.093395e-005;
n=75; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=3.226382e-006; ng(n+1)=4.148112e-005;
%odnowa zmiennej metryki
n=76; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=2.356995e-006; ng(n+1)=4.121618e-005;
n=77; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.430061e-005; ng(n+1)=3.030387e-005;
n=78; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.403178e-007; ng(n+1)=1.106564e-004;
n=79; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=2.860122e-005; ng(n+1)=1.106329e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=80; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=2.025791e-012; ng(n+1)=1.106313e-004;
n=81; farx(n+1)=7.409275e-001; foe(n+1)=9.415426e+000; krok(n+1)=1.935801e-011; ng(n+1)=1.106312e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
